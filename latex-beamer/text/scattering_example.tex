%!TEX TS-program = ../make.zsh

\begin{frame}[fragile]{Scattering example}

  \begin{columns}
    \begin{column}{0.5\textwidth}

      \only<1>{\image{example-sca1-0-steamshovel-color}}
      \only<2>{\image{example-sca0-1-steamshovel-color}}
      \only<3>{\image{example-sca0-01-steamshovel-color}}
      \only<4>{\image{example-sca0-001-steamshovel-color}}

      \only<4>{\tiny{Animation on youtube: \url{https://youtu.be/BhJ6F3B-I1s}}}

      \only<5>{\image{example-sca0-0001-steamshovel-color}}
      \only<6>{\image{example-sca0-0001-steamshovel-color-zoom}}
      \only<7>{\image{example-sca0-0001-steamshovel-color-zoom2}}

      \only<6-7>{\tiny{(Magnification)}}

    \end{column}
    \begin{column}{0.5\textwidth}

      Shoot photons onto the DOM. Top view.

      \newcommand\scatteringdenominator{%
        \only<1>{1}\only<2>{10}\only<3>{100}\only<4>{1\,000}\only<5-7>{10\,000}\xspace}

      \only<1>{No hole ice at all.}
      \only<2->{Change the scattering length inside the hole ice to be 1/\scatteringdenominator of the scattering length outside.}

      \begin{equation*}\begin{align}
        \lambda_\text{sca,hole-ice} &= \frac{1}{\scatteringdenominator}\, & \lambda_\text{sca,bulk} \\
        \lambda_\text{abs,hole-ice} &= & \lambda_\text{sca,bulk}
      \end{align}\end{equation*}

      \tiny{Colors indicate simulation steps, i.e. number of scatterings relative to the total number until absorption. Red: Photon just created, blue: Photon about to be absorbed.}

      \begin{onlyenv}<1>
        \begin{smallbash}
          $ICESIM/env-shell.sh
          cd $HOLE_ICE_STUDY/scripts/AngularAcceptance
          ./run.rb --scattering-factor=1.0 --absorption-factor=1.0 --distance=1.0 --plane-wave --number-of-photons=1e2 --number-of-runs=1 --number-of-parallel-runs=1 --save-photon-paths --cpu
          steamshovel tmp/propagated_photons.i3
        \end{smallbash}
      \end{onlyenv}

      \begin{onlyenv}<2>
        \begin{smallbash}
          $ICESIM/env-shell.sh
          cd $HOLE_ICE_STUDY/scripts/AngularAcceptance
          ./run.rb --scattering-factor=0.1 --absorption-factor=1.0 --distance=1.0 --plane-wave --number-of-photons=1e2 --number-of-runs=1 --number-of-parallel-runs=1 --save-photon-paths --cpu
          steamshovel tmp/propagated_photons.i3
        \end{smallbash}
      \end{onlyenv}

      \begin{onlyenv}<3>
        \begin{smallbash}
          $ICESIM/env-shell.sh
          cd $HOLE_ICE_STUDY/scripts/AngularAcceptance
          ./run.rb --scattering-factor=0.01 --absorption-factor=1.0 --distance=1.0 --plane-wave --number-of-photons=1e2 --number-of-runs=1 --number-of-parallel-runs=1 --save-photon-paths --cpu
          steamshovel tmp/propagated_photons.i3
        \end{smallbash}
      \end{onlyenv}

      \begin{onlyenv}<4>
        \begin{smallbash}
          $ICESIM/env-shell.sh
          cd $HOLE_ICE_STUDY/scripts/AngularAcceptance
          ./run.rb --scattering-factor=0.001 --absorption-factor=1.0 --distance=1.0 --plane-wave --number-of-photons=1e2 --number-of-runs=1 --number-of-parallel-runs=1 --save-photon-paths --cpu
          steamshovel tmp/propagated_photons.i3
        \end{smallbash}
      \end{onlyenv}

      \begin{onlyenv}<5-7>
        \begin{smallbash}
          $ICESIM/env-shell.sh
          cd $HOLE_ICE_STUDY/scripts/AngularAcceptance
          ./run.rb --scattering-factor=0.0001 --absorption-factor=1.0 --distance=1.0 --plane-wave --number-of-photons=1e2 --number-of-runs=1 --number-of-parallel-runs=1 --save-photon-paths --cpu
          steamshovel tmp/propagated_photons.i3
        \end{smallbash}
      \end{onlyenv}

    \end{column}
  \end{columns}

  \source{\url{https://github.com/fiedl/hole-ice-study/issues/39}}

\end{frame}

\note[itemize]{
  \item Photon wave length: 340\,nm (UV)
  \item DOM position: $(-256.02301025390625, -521.281982421875, 500.0)$
  \item Scattering length in bulk ice at this DOM: $1.78\,\text{m} \pm 1.79\,\text{m}$
  \item Absorption length in bulk ice at this DOM: about 150\,m
}
